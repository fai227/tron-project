リアルタイムOS「μT-Kernel 3.0」を活用し，micro:bitとMaqueen plus V2を用いてコネクテッドカーのシステム構築を行なった．本プログラムでは，車両が将来走行予定の経路を予約する，時空間グリッド予約を導入し，複数車両が相互干渉せずに安全かつ効率的に走行できるシステムを構築した．サーバーとなるmicro:bit１台と，クライアント車両となるmicro:bitとMaqueen plus V2を３セット用意した．
サーバーは時空間グリッドの情報を管理しており，時間ごとのグリッドの占有状況を把握している．車両はサーバーに目的地の情報を送信し，どの時刻にどのグリッドを通過するかという情報を取得する．車両は直進しながらセンサーからのデータを解析し，進行方向を判断しつつ，必要に応じて経路を修正する．目的地に到達すると，新しい目的地が設定され，同様に経路をサーバーから取得する．
車両は，「サーバーとの通信」「指定された時刻に指定されたグリッドを通過するように加減速」「センサー情報による車両の制御」といったタスクを並列に行っている．RTOSの特性を活かして，それぞれのタスクでは応答待ちの間はタスクをスリープさせることで，CPUを効率的に利用している．例えば，サーバーとの通信待ちや，センサー情報の応答待ちの間はCPUが解放されており他のタスクを行うことが可能となっている．今回は実装することができなかったが，衝突検知やナビの機能を追加することもできる．その際にも，タスクの優先度の設定により，安全性を担保したまま機能を追加することができ，拡張性に富んだシステムを作ることができる．
複数の車両が協調して走行できるかを確認するために，合計X回の実験を行い，本プログラムの性能を評価した．
1. エラー発生回数​：グリッドの予約競合によるMaqueen同士の衝突ライン外の走行​
2. CPU使用率：​一定期間中にCPUがアクティブに動作している時間の割合





<!-- 
プログラムの目的
本プログラムの目的は，micro:bitとMaqueenを利用した協調型自動運転の実現である．協調型自動運転とは，複数の自律走行車両が互いの位置や走行予定を共有し，衝突や混雑を回避する技術である．本プログラムでは，車両が将来走行予定の経路を予約する，時空間グリッド予約システムを導入し，複数車両が相互干渉せずに安全かつ効率的に走行できる環境を構築する．リアルタイムOS「μT-Kernel 3.0」を活用し，低遅延での処理を実現することで，車両の安全性とリアルタイム性を両立する．

使用機材と操作方法
本プログラムの実行には，micro:bit 4台とMaqueen 3台を用意する．micro:bit１台をサーバーとし，残りのmaicro:bit３台をMaqueen３台と組み合わせてクライアント車両とする．操作方法としては，micro:bitのボタン操作により，デバイスをサーバーとして起動するか，クライアント車両として起動するかを選択する．車両を道路環境上の決められた地点にセットし，走行を開始する．

プログラムの流れ
車両側では目的地がランダムに設定される．サーバーは時空間グリッドの情報を管理しており，時間ごとのグリッドの占有状況を把握している．車両はサーバーに目的地の情報を送信し，どの時刻にどのグリッドを通過するかという情報を取得する．車両は直進しながらセンサーからのデータを解析し，進行方向を判断しつつ，必要に応じて経路を修正する．目的地に到達すると，新しい目的地が設定され，同様に経路をサーバから取得する．
また，通信が重要なため，イベント割り込みを活用して低遅延での通信処理を行い，安全な走行を確保する設計となっている．

工夫点
車両は，「サーバとの通信」「指定された時刻に指定されたグリッドを通過するように加減速」「センサ情報による車両の制御」といった動作をリアルタイムに切り替えながら行なっており，RTOSのリアルタイム性を活かしている．

評価と実験結果
複数の車両が協調して走行できるかを確認するために，合計X回の実験を行い，本プログラムの性能を評価した．
1. 動作異常: 実験結果，X回中Y回の動作異常が発生した．特に通信タイムアウトや車両停止が確認された．
2. 衝突回数: 衝突はZ回発生し，安全性においてさらなる改良が必要であると判断された．
3. 目的地までの移動時間: 各車両の目的地までの移動時間の平均はA秒であり，最短B秒，最長C秒となった．

これらの結果から，時空間グリッドでの協調型自動運転の実現性を示すことができた． 
-->